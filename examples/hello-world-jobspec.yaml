version: 1
  
resources:
  four-cores:  
    type: node

    # The presence of replicas indicates a slot
    # Any count for node would be ignored (and not required)
    replicas: 10

    requires:
      io.archspec:
        cpu.target: amd64

    with:
    - type: core
      count: 4
    - type: gpu
      count: 4

      requires:
        org.opencontainers:
          gpu.vendor: nvidia

tasks:
- name: task-1
  command:
    - bash
    - -c
    - "echo Starting task 1; sleep 3; echo Finishing task 1"

  resources: single-node
- name: task-2
  depends_on: ["task-1"]
  command:
      - bash
      - -c
      - "echo Starting task 2; sleep 3; echo Finishing task 2"

  resources: single-node
